{
  "threshold_inn": {
    "name": "Threshold Inn",
    "description": "A sturdy waypoint for arrivals. Warm light, worn tables, and the hum of cautious conversation.",
    "floor_id": "floor_zero",
    "type": "town",
    "tags": ["safe", "town", "floor_zero", "hub"],
    "entry_story_node_id": null,
    "npcs_present": [
      {
        "npc_id": "dana",
        "talk_node_id": "threshold_inn_hub_router",
        "quest_hub_node_id": "dana_turn_in_check"
      },
      {
        "npc_id": "cerel",
        "talk_node_id": "cerel_inn_converse_router",
        "quest_hub_node_id": null
      }
    ],
    "connections": [
      {
        "to": "shoreline_ruins",
        "label": "Side Quest: Dana's rumor (Shoreline Ruins)",
        "progresses_story": false,
        "requires_quest_active": "dana_shoreline_rumor",
        "hide_if_quest_completed": "dana_shoreline_rumor",
        "hide_if_quest_turned_in": "dana_shoreline_rumor",
        "hide_if_flag_true": "flag_protoquest_declined"
      },
      {
        "to": "floor_one_gate",
        "label": "Proceed to Floor One",
        "progresses_story": true
      }
    ]
  },
  "shoreline_ruins": {
    "name": "Shoreline Ruins",
    "description": "Half-buried stones and salt-worn walls. The sound of waves masks quieter movements.",
    "floor_id": "floor_zero",
    "type": "side",
    "tags": ["ruins", "optional", "floor_zero"],
    "entry_story_node_id": "protoquest_ruins_entry",
    "connections": [
      {
        "to": "threshold_inn",
        "label": "Return to the inn",
        "progresses_story": false
      }
    ]
  },
  "floor_one_gate": {
    "name": "Floor One Threshold",
    "description": "A shimmering boundary. Beyond it, the first true floor awaits.",
    "floor_id": "floor_one",
    "type": "gate",
    "tags": ["gate", "floor_one", "hub"],
    "entry_story_node_id": "floor1_gate_entry",
    "connections": [
      {
        "to": "threshold_inn",
        "label": "Return to the inn",
        "progresses_story": false
      },
      {
        "to": "open_plains",
        "label": "Step into the Open Plains",
        "progresses_story": true
      }
    ]
  },
  "open_plains": {
    "name": "Open Plains",
    "description": "Wide grasslands stretch beneath a high sky. A well-worn road cuts east toward the goblin cave.",
    "floor_id": "floor_one",
    "type": "open",
    "tags": ["plains", "floor_one", "hub"],
    "entry_story_node_id": "plains_entry",
    "connections": [
      {
        "to": "floor_one_gate",
        "label": "Return to the Floor One gate",
        "progresses_story": false
      },
      {
        "to": "plains_offroad",
        "label": "Go off-road into the grass",
        "progresses_story": false
      },
      {
        "to": "goblin_cave_entrance",
        "label": "Follow the road to the goblin cave",
        "progresses_story": true
      },
      {
        "to": "northern_ridge",
        "label": "Head toward the northern ridge",
        "progresses_story": false
      }
    ]
  },
  "northern_ridge": {
    "name": "Northern Ridge",
    "description": "Steep stone rises over the plains. Smoke stains the air, and crude totems mark goblin territory.",
    "floor_id": "floor_one",
    "type": "story",
    "tags": ["ridge", "floor_one", "story"],
    "entry_story_node_id": "northern_ridge_approach",
    "connections": [
      {
        "to": "northern_ridge_path",
        "label": "Press on up the ridge",
        "progresses_story": false,
        "show_if_flag_true": "flag_cerel_returned_to_inn"
      },
      {
        "to": "open_plains",
        "label": "Return to the Open Plains",
        "progresses_story": false
      }
    ]
  },
  "northern_ridge_path": {
    "name": "Northern Ridge Path",
    "description": "A narrow trail climbs toward a rocky clearing marked by fresh totems.",
    "floor_id": "floor_one",
    "type": "story",
    "tags": ["ridge", "floor_one", "story"],
    "entry_story_node_id": "northern_ridge_path_router",
    "entry_story_repeatable": true,
    "connections": [
      {
        "to": "northern_ridge",
        "label": "Return to the ridge",
        "progresses_story": false
      }
    ]
  },
  "plains_offroad": {
    "name": "Plains Off-Road",
    "description": "Tall grass and uneven ground hide predators. The wind carries distant howls.",
    "floor_id": "floor_one",
    "type": "side",
    "tags": ["plains", "floor_one", "open"],
    "entry_story_node_id": "plains_offroad_intro",
    "connections": [
      {
        "to": "open_plains",
        "label": "Return to the road",
        "progresses_story": false
      }
    ]
  },
  "goblin_cave_entrance": {
    "name": "Goblin Cave Entrance",
    "description": "A shallow cave mouth with crude totems and smoke-stained rock. The goblin camp lies inside.",
    "floor_id": "floor_one",
    "type": "story",
    "tags": ["cave", "floor_one", "hub"],
    "entry_story_node_id": "goblin_cave_entrance_intro",
    "npcs_present": [
      {
        "npc_id": "cerel",
        "talk_node_id": "cave_entrance_router",
        "quest_hub_node_id": "cerel_turn_in_check"
      }
    ],
    "connections": [
      {
        "to": "open_plains",
        "label": "Return to the Open Plains",
        "progresses_story": false
      },
      {
        "to": "goblin_camp",
        "label": "Enter the goblin camp",
        "progresses_story": false
      },
      {
        "to": "deeper_cave_path",
        "label": "Take the deeper cave path",
        "progresses_story": true,
        "show_if_flag_true": "flag_rampager_defeated"
      }
    ]
  },
  "goblin_camp": {
    "name": "Goblin Camp",
    "description": "Crude tents and burning pits fill the chamber. Goblins crowd the space, ready to swarm.",
    "floor_id": "floor_one",
    "type": "open",
    "tags": ["cave", "floor_one", "open"],
    "entry_story_node_id": "goblin_camp_hub",
    "connections": [
      {
        "to": "goblin_cave_entrance",
        "label": "Return to the cave entrance",
        "progresses_story": false
      }
    ]
  },
  "deeper_cave_path": {
    "name": "Deeper Cave Path",
    "description": "Narrow tunnels twist into darkness. The air grows colder and heavier with each step.",
    "floor_id": "floor_one",
    "type": "story",
    "tags": ["cave", "floor_one", "story"],
    "entry_story_node_id": "cave_path_entry",
    "connections": [
      {
        "to": "goblin_cave_entrance",
        "label": "Retreat to the cave entrance",
        "progresses_story": false
      }
    ]
  },
  "boss_chamber": {
    "name": "Boss Chamber (Locked)",
    "description": "A sealed stone door blocks the guardian's chamber. The lock does not respond.",
    "floor_id": "floor_one",
    "type": "boss",
    "tags": ["boss", "floor_one", "locked"],
    "entry_story_node_id": null,
    "connections": []
  },
  "village_outskirts": {
    "name": "Village Outskirts (Legacy)",
    "description": "[Legacy location - preserved for save compatibility]",
    "floor_id": "legacy",
    "type": "side",
    "tags": ["legacy"],
    "entry_story_node_id": null,
    "connections": [
      {
        "to": "threshold_inn",
        "label": "Return to Threshold Inn",
        "progresses_story": false
      }
    ]
  },
  "village": {
    "name": "Village (Legacy)",
    "description": "[Legacy location - preserved for save compatibility]",
    "floor_id": "legacy",
    "type": "side",
    "tags": ["legacy"],
    "entry_story_node_id": "village_return_entry",
    "connections": [
      {
        "to": "village_outskirts",
        "label": "Head back to the outskirts",
        "progresses_story": false
      }
    ]
  },
  "forest_deeper": {
    "name": "Deep Forest (Legacy)",
    "description": "[Legacy location - preserved for save compatibility]",
    "floor_id": "legacy",
    "type": "side",
    "tags": ["legacy"],
    "entry_story_node_id": "forest_deeper_entry",
    "connections": [
      {
        "to": "village_outskirts",
        "label": "Retreat to the outskirts",
        "progresses_story": false
      }
    ]
  }
}
